package com.OS3.iscorebridge

class Vulnerability {
    private var north: Boolean = false
    private var east: Boolean = false
    private var south: Boolean = false
    private var west: Boolean = false
    private val dlm = ","
    constructor(vulnerable:Array<Char>){
        for (position in vulnerable){
            when(position){
                'N' -> north = true
                'E' -> east = true
                'S' -> south = true
                'W' -> west = true
            }
        }
    }

    constructor(vulnerability: String){
        var vulnerabilities = vulnerability.split(",")
        var vulnerabilitiesAsChar = ArrayList<Char>()
        for(vul in vulnerabilities){
            vulnerabilitiesAsChar.add(vul[0])
        }
        for (position in vulnerabilitiesAsChar.toTypedArray()){
            when(position){
                'N' -> north = true
                'E' -> east = true
                'S' -> south = true
                'W' -> west = true
            }
        }
    }

    fun isVulnerable(position: Char) : Boolean{
        when(position){
            'N' -> return north
            'E' -> return east
            'S' -> return south
            'W' -> return west
        }
        return false
    }

    override fun toString() : String{
        var out = ""
        if(north){
            out += "N$dlm"
        }
        if(east){
            out += "E$dlm"
        }
        if(south){
            out += "S$dlm"
        }
        if(west){
            out += "W$dlm"
        }
        return out.substring(0, out.length - dlm.length)
    }
}